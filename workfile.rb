#!/usr/bin/ruby

require File.expand_path(ENV['MOSYNCDIR']+'/rules/mosync_exe.rb')
work = PipeExeWork.new
work.instance_eval do
	@PREREQUISITES = [
		BundleTask.new(self, './Resources/LocalFiles.bin', './tests/Res')
	]
	@SOURCES = [".", "Resources", "LocalFiles", "LocalFiles/zwoptex", "LocalFiles/TileMaps", "LocalFiles/Images", "LocalFiles/Images/sprites_test", "LocalFiles/Images/bugs", "LocalFiles/fonts", "LocalFiles/animations", "cocos2dx", "cocos2dx/touch_dispatcher", "cocos2dx/tileMap_parallax_nodes", "cocos2dx/textures", "cocos2dx/text_input_node", "cocos2dx/support", "cocos2dx/support/zip_support", "cocos2dx/support/image_support", "cocos2dx/support/data_support", "cocos2dx/sprite_nodes", "cocos2dx/script_support", "cocos2dx/proj.wophone", "cocos2dx/proj.win32", "cocos2dx/proj.linux", "cocos2dx/proj.bada", "cocos2dx/proj.bada/sdk2.0", "cocos2dx/proj.bada/sdk1.0", "cocos2dx/proj.airplay", "cocos2dx/platform", "cocos2dx/platform/mosync", "cocos2dx/particle_nodes", "cocos2dx/misc_nodes", "cocos2dx/menu_nodes", "cocos2dx/layers_scenes_transitions_nodes", "cocos2dx/label_nodes", "cocos2dx/keypad_dispatcher", "cocos2dx/include", "cocos2dx/effects", "cocos2dx/cocoa", "cocos2dx/base_nodes", "cocos2dx/actions", "cocos2dx/.settings", "chipmunk", "chipmunk/src", "chipmunk/src/constraints", "chipmunk/src/CMakeFiles", "chipmunk/src/CMakeFiles/chipmunk_static.dir", "chipmunk/src/CMakeFiles/chipmunk.dir", "chipmunk/proj.wophone", "chipmunk/proj.win32", "chipmunk/proj.linux", "chipmunk/proj.bada", "chipmunk/proj.bada/sdk2.0", "chipmunk/proj.bada/sdk1.0", "chipmunk/proj.airplay", "chipmunk/include", "chipmunk/include/chipmunk", "chipmunk/include/chipmunk/constraints", "Box2D", "Box2D/proj.wophone", "Box2D/proj.win32", "Box2D/proj.linux", "Box2D/proj.bada", "Box2D/proj.bada/sdk2.0", "Box2D/proj.bada/sdk1.0", "Box2D/proj.airplay", "Box2D/Dynamics", "Box2D/Dynamics/Joints", "Box2D/Dynamics/Contacts", "Box2D/Common", "Box2D/Collision", "Box2D/Collision/Shapes", "cocos2dx/platform/third_party/mosync", "cocos2dx/platform/third_party/mosync/zlib", "cocos2dx/platform/third_party/mosync/expat", "cocos2dx/platform/third_party/mosync/expat/lib", "tests/test.mosync", "CocosDenshion/include", "CocosDenshion/mosync", "tests/tests/AccelerometerTest", "tests/tests/ActionManagerTest", "tests/tests/ActionsTest", "tests/tests/Box2DTestBed", "tests/tests/Box2DTestBed/Tests", "tests/tests/Box2DTest", "tests/tests/BugsTest", "tests/tests/BugsTest/Bug-458", "tests/tests/ChipmunkTest", "tests/tests/ClickAndMoveTest", "tests/tests/CocosDenshionTest", "tests/tests/CocosNodeTest", "tests/tests/CurrentLanguageTest", "tests/tests/DirectorTest", "tests/tests/DrawPrimitivesTest", "tests/tests/EaseActionsTest", "tests/tests/EffectsAdvancedTest", "tests/tests/EffectsTest", "tests/tests/FontTest", "tests/tests/HiResTest", "tests/tests/IntervalTest", "tests/tests/KeypadTest", "tests/tests/LabelTest", "tests/tests/LayerTest", "tests/tests/MenuTest", "tests/tests/MotionStreakTest", "tests/tests/ParallaxTest", "tests/tests/ParticleTest", "tests/tests/PerformanceTest", "tests/tests/ProgressActionsTest", "tests/tests/RenderTextureTest", "tests/tests/RotateWorldTest", "tests/tests/SceneTest", "tests/tests/SchedulerTest", "tests/tests/SpriteTest", "tests/tests/Texture2dTest", "tests/tests/TextureCacheTest", "tests/tests/TileMapTest", "tests/tests/TouchesTest", "tests/tests/TransitionsTest", "tests/tests/ZwoptexTest", "tests/tests", "tests/tests/TextInputTest"]
	@IGNORED_FILES = ["rebuild.build.cpp", "CCSAXParser.cpp", "xmltok_impl.c", "xmltok_ns.c", "CCUserDefault.cpp", "CCImage.cpp", "example.c", "minigzip.c"]
	@EXTRA_SOURCEFILES = ["tests/AppDelegate.cpp"]
	@LST_FILES = ["mosync_resources_info.lst"]
	@NAME = 'cocos2dx'
	@EXTRA_CFLAGS = ' -Wno-all -Wno-extra -Wno-error -w -O2 -std=c99 -DHAVE_EXPAT_CONFIG_H -DCC_TEXTURE_ATLAS_USE_TRIANGLE_STRIP -Wno-conversion'
	@EXTRA_CPPFLAGS = ' -Wno-all -Wno-extra -Wno-error -w -O2 -std=c99 -DHAVE_EXPAT_CONFIG_H -DCC_TEXTURE_ATLAS_USE_TRIANGLE_STRIP -Wno-conversion'
	@EXTRA_INCLUDES = ["/Applications/MoSync/include/newlib/stlport", "/Applications/MoSync/include/newlib", "./cocos2dx/include", "./CocosDenshion/include", "./cocos2dx/platform", "./cocos2dx", "./chipmunk/include", "./chipmunk/include/chipmunk", "./", "./cocos2dx/platform/third_party/mosync/zlib", "./cocos2dx/platform/third_party/mosync/expat/lib", "./cocos2dx/platform/third_party/mosync"]
	@LIBRARIES = ["mafs"]
	@EXTRA_LINKFLAGS = ' -datasize=32768000 -heapsize=16384000 -stacksize=256000'
end

work.invoke
